Index: app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tbcworks.screens.addressForm\r\n\r\nimport android.os.Bundle\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.core.os.bundleOf\r\nimport androidx.fragment.app.setFragmentResult\r\nimport androidx.fragment.app.viewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport androidx.navigation.fragment.navArgs\r\nimport com.example.tbcworks.BaseFragment\r\nimport com.example.tbcworks.databinding.FragmentAddressFormBinding\r\nimport com.example.tbcworks.enums.AddressType\r\nimport com.example.tbcworks.items.AddressItem\r\nimport com.example.tbcworks.viewModel.AddressViewModel\r\n\r\nclass AddressFormFragment : BaseFragment<FragmentAddressFormBinding>() {\r\n    private val viewModel: AddressViewModel by viewModels()\r\n    private val args: AddressFormFragmentArgs by navArgs()\r\n\r\n    override fun inflateBinding(\r\n        inflater: LayoutInflater,\r\n        container: ViewGroup?\r\n    ): FragmentAddressFormBinding {\r\n        return FragmentAddressFormBinding.inflate(inflater, container, false)\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n    }\r\n    override fun listeners() = with(binding){\r\n        btnBack.setOnClickListener {\r\n            findNavController().popBackStack()\r\n        }\r\n        btnSubmit.setOnClickListener {\r\n            submit()\r\n        }\r\n    }\r\n    private fun submit() {\r\n        with(binding){\r\n            val name = etName.text.toString().trim()\r\n            val desc = etDescription.text.toString().trim()\r\n            val selectedType = binding.spinnerAddressType.selectedItem.toString()\r\n            val type = when (selectedType) {\r\n                HOME -> AddressType.HOME\r\n                OFFICE -> AddressType.OFFICE\r\n                else -> AddressType.HOME\r\n            }\r\n\r\n            if (!validateInputs(name, desc)) return\r\n\r\n            val newAddress = if (binding.btnSubmit.text == EDIT_ADDRESS) {\r\n                editUser(name, desc, type)\r\n            } else {\r\n                addAddress(name, desc, type)\r\n            }\r\n            setFragmentResult(\"address\", bundleOf(\"address\" to newAddress))\r\n            findNavController().popBackStack()\r\n        }\r\n        \r\n\r\n    }\r\n    private fun validateInputs(name:String, desc: String): Boolean{\r\n        var isValid = true\r\n        if (name.isEmpty()) {\r\n            binding.etName.error = NAME_EMPTY_ERROR\r\n            isValid = false\r\n        }\r\n\r\n        if (desc.isEmpty()) {\r\n            binding.etDescription.error = DESC_EMPTY_ERROR\r\n            isValid = false\r\n        }\r\n\r\n        return isValid\r\n    }\r\n    private fun editUser(name: String, desc: String, type: AddressType): AddressItem = with(binding) {\r\n        val currentAddress = args.addressItem ?: throw Exception()\r\n\r\n        val updatedAddress = currentAddress.copy(\r\n            name = name,\r\n            description = desc,\r\n            addressType = type\r\n        )\r\n\r\n        return@with updatedAddress\r\n    }\r\n\r\n    private fun addAddress(name: String, desc: String, type: AddressType) : AddressItem = with(binding){\r\n\r\n        return@with AddressItem(\r\n        id = -1,\r\n        name = name,\r\n        description = desc,\r\n        addressType = type\r\n        )\r\n    }\r\n    override fun bind() = with(binding){\r\n        val item = args.addressItem\r\n\r\n        if (item!= null){\r\n            tvTitle.text = EDIT_ADDRESS\r\n            etName.setText(item.name)\r\n            etDescription.setText(item.description)\r\n            if(item.addressType == AddressType.HOME){\r\n                spinnerAddressType.setSelection(0)\r\n            }else{\r\n                spinnerAddressType.setSelection(1)\r\n            }\r\n            btnSubmit.text = EDIT_ADDRESS\r\n        }\r\n    }\r\n    companion object {\r\n        const val EDIT_ADDRESS = \"Edit Address\"\r\n        const val NAME_EMPTY_ERROR = \"Name cannot be empty\"\r\n        const val DESC_EMPTY_ERROR = \"Description cannot be empty\"\r\n        const val HOME = \"Home\"\r\n        const val OFFICE = \"Office\"\r\n    }\r\n\r\n\r\n}
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt b/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt
--- a/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt	(date 1761540032121)
@@ -118,6 +118,4 @@
         const val HOME = "Home"
         const val OFFICE = "Office"
     }
-
-
 }
\ No newline at end of file
